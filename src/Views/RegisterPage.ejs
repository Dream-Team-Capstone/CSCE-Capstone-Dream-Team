<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PyBlock</title>
    <link href='/StylesPages/RegisterStyles.css' rel='stylesheet'>
    <link href='/StylesPages/errorStyles.css' rel='stylesheet'>
    <script src="/Scripts/settingsHandler.js" defer></script>
    <!-- Hidden input to indicate if user is logged in -->
    <input type="hidden" name="isLoggedIn" value="<%= locals.user ? 'true' : 'false' %>">
    <link rel="stylesheet" href="/StylesPages/accessibilityStyles.css">
</head>    
<body>
    <!-- NAV BAR START -->
    <header class="navigation" role="banner">
      <nav aria-label="Main Navigation">
      <ul class="navbar_logo">
        <li>
          <a href="/api/home">
            <img class="logo" src="/ImagesUsed/pyBlocks_Updated.png" alt="PyBlocks logo, linking back to home page">
          </a>
        </li>
      </ul>
      <ul class="navbar_buttons_list">
        <li><a href="#contact"><button class="Nav_Buttons" aria-disabled="true">Contact Us</button></a></li>
        <li><a href="#tutorials"><button class="Nav_Buttons" aria-disabled="true">Tutorials</button></a></li>
        <li><a href="/api/play"><button class="Nav_Buttons">Play</button></a></li>
        <li><a href="#courses"><button class="Nav_Buttons" aria-disabled="true">Courses</button></a></li>
        <li><a href="#resources"><button class="Nav_Buttons" aria-disabled="true">Resources</button></a></li>
        <li>
          <% if (locals.user && locals.user !== null) { %>
            <a href="/api/dashboard">
              <button class="Nav_Buttons" aria-label="Go to dashboard">Dashboard</button>
            </a>
          <% } else { %>
            <a href="/api/login">
              <button class="Nav_Buttons" aria-label="Sign in to your account">Sign In</button>
            </a>
          <% } %>
        </li>
        <li><a href="/api/register"><button class="Nav_Buttons">Register</button></a></li>
      </ul>
      <ul class="Settings_logo">
        <li><a href="/api/settings">
          <img class="Settings_logo" src="/ImagesUsed/SettingsIcon.png" alt="Settings logo, linking to settings page">
        </a>
      </li>
      </ul>
      </nav>
    </header>
<!-- NAV BAR END -->

<!-- BODY START -->
<main class="page_body">
    <h1 class="page_title">Welcome to PyBlocks!</h1>
    <!-- Displays errors -->
    <% if (errors && errors.length > 0) { %>
      <div class="error_box" 
           role="alert" 
           aria-live="assertive"
           aria-atomic="true"
           tabindex="-1"
           id="registrationErrorContainer">
        <% errors.forEach(function(error) { %>
            <p class="error_popup_text"><%= error.msg || error %></p>
        <% }); %>
      </div>
    <% } %>
    
    <form class="Register_Form" action="/api/register" method="POST" aria-labelledby="Register Form">
        <fieldset>
            <legend id="registerForm" class="visually-hidden">Register Form</legend>
            <div class="Form_Group">
              <label for="FName">First Name:</label>
              <input type="text" name="first_name" id="FName" placeholder="First Name" aria-required="true"
                    class="<%= errors && errors.some(e => e.param === 'first_name') ? 'error' : '' %>">
            </div>
            <div class="Form_Group">
              <label for="LName">Last Name:</label>
              <input type="text" name="last_name" id="LName" placeholder="Last Name" aria-required="true"
                    class="<%= errors && errors.some(e => e.param === 'last_name') ? 'error' : '' %>">
            </div>
            <div class="Form_Group">
              <label for="Email">Email:</label>
              <input type="email" name="email" id="Email" placeholder="Email" aria-required="true"
                    class="<%= errors && errors.some(e => e.param === 'email') ? 'error' : '' %>">
            </div>
            <div class="Form_Group">
              <label for="Password">Password:</label>
              <input type="password" name="password" id="Password" placeholder="Password" aria-required="true"
                    class="<%= errors && errors.some(e => e.param === 'password') ? 'error' : '' %>">
            </div>
            <div class="Form_Group Button_Center">
              <button type="submit" class="Register_Button" aria-label="Register to create an account">Register</button>
            </div>
        </fieldset>
    </form>
</main>
<!-- BODY END -->

<!-- FOOTER START -->
<footer role="contentinfo">
  <ul class="navbar_logo">
    <li>
      <a href="/api/home">
        <img class="logo" src="/ImagesUsed/pyBlocks_Updated.png" alt="PyBlocks logo, linking back to home page">
      </a>
    </li>
  </ul>
  <ul class="footer_buttons">
    <li><a href="#resources" aria-label="Resources section (Coming soon)">Resources</a></li>
    <li><a href="#tutorials" aria-label="Tutorials section (Coming soon)">Tutorials</a></li>
    <li><a href="#editors" aria-label="Open blank editors (Coming soon)">Open Blank Editors</a></li>
  </ul>
</footer>
<!-- FOOTER END -->
</body>
</html>
